function a(a){a&&a.data&&a.data.glitch&&a.data.glitch.base64&&a.data.glitch.parameters?self.postMessage({glitched:b(a.data.glitch.base64,a.data.glitch.parameters)}):self.postMessage(a.data)}function b(a,b){for(m=b,k=d(a),l=f(k),n=0,o=m.iterations;n<o;n++)c(k,l,m.seed,m.amount,n,m.iterations);return e(k)}function c(a,b,c,d,e,f){var g,h=a.length-b-4,i=parseInt(h/f*e,10),j=parseInt(h/f*(e+1),10),k=j-i,l=parseInt(i+k*c,10);l>h&&(l=h),g=Math.floor(b+l),a[g]=Math.floor(256*d)}function d(a){var b,c,d,e=[];for(n=23,o=a.length;n<o;n++){switch(c=i[a.charAt(n)],b=(n-23)%4){case 1:e.push(d<<2|c>>4);break;case 2:e.push((15&d)<<4|c>>2);break;case 3:e.push((3&d)<<6|c)}d=c}return e}function e(a){var b,c,d,e=["data:image/jpeg;base64,"];for(n=0,o=a.length;n<o;n++){switch(c=a[n],b=n%3){case 0:e.push(h[c>>2]);break;case 1:e.push(h[(3&d)<<4|c>>4]);break;case 2:e.push(h[(15&d)<<2|c>>6]),e.push(h[63&c])}d=c}return 0===b?(e.push(h[(3&d)<<4]),e.push("==")):1===b&&(e.push(h[(15&d)<<2]),e.push("=")),e.join("")}function f(a){var b=417;for(n=0,o=a.length;n<o;n++)if(255===a[n]&&218===a[n+1]){b=n+2;break}return b}var g,h,i,j,k,l,m,n,o;self.addEventListener("message",a,!1),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=g.split(""),i={},l=0,n=0,o=0,h.forEach(function(a,b){i[a]=b});