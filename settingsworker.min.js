function a(a){a&&a.data&&(a.data.load&&f(),a.data.save&&g(a.data.save),a.data.setStorageKey&&d(a.data.setStorageKey),a.data.setDefaultSettings&&e(a.data.setDefaultSettings))}function b(a,b){if("string"==typeof a){"undefined"==typeof b&&(b=a);var c={};c[a]=b,self.postMessage(c)}}function c(a){b("error",a)}function d(a){a&&(j=a)}function e(a){a&&(i=a)}function f(){localforage.getItem(j,function(a,d){a?(c("settings.error.load"),console&&console.log("localforage error",a)):!d&&i?(h=i,g(i)):(h=d,b("update",h))})}function g(a){a&&localforage.setItem(j,a,function(a,d){a?(c("settings.error.save"),console&&console.log("localforage error",a)):d?(h=d||i,b("update",h)):console&&console.log("no data was saved",d)})}var h,i,j;"Promise"in("undefined"!=typeof window?window:self)&&!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.localforage=b():a.localforage=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}b.__esModule=!0,function(){function a(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function e(){var a,b,c;for(a=1;a<arguments.length;a++)if(b=arguments[a])for(c in b)b.hasOwnProperty(c)&&(m(b[c])?arguments[0][c]=b[c].slice():arguments[0][c]=b[c]);return arguments[0]}function f(a){for(var b in h)if(h.hasOwnProperty(b)&&h[b]===a)return!0;return!1}var g={},h={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},i=[h.INDEXEDDB,h.WEBSQL,h.LOCALSTORAGE],j=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],k={description:"",driver:i.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},l=function(a){var b=b||a.indexedDB||a.webkitIndexedDB||a.mozIndexedDB||a.OIndexedDB||a.msIndexedDB,c={};return c[h.WEBSQL]=!!a.openDatabase,c[h.INDEXEDDB]=!!function(){if("undefined"!=typeof a.openDatabase&&a.navigator&&a.navigator.userAgent&&/Safari/.test(a.navigator.userAgent)&&!/Chrome/.test(a.navigator.userAgent))return!1;try{return b&&"function"==typeof b.open&&"undefined"!=typeof a.IDBKeyRange}catch(a){return!1}}(),c[h.LOCALSTORAGE]=!!function(){try{return a.localStorage&&"setItem"in a.localStorage&&a.localStorage.setItem}catch(a){return!1}}(),c}(this),m=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},n=function(){function b(a){d(this,b),this.INDEXEDDB=h.INDEXEDDB,this.LOCALSTORAGE=h.LOCALSTORAGE,this.WEBSQL=h.WEBSQL,this._defaultConfig=e({},k),this._config=e({},this._defaultConfig,a),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return b.prototype.config=function(a){if("object"==typeof a){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in a)"storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),this._config[b]=a[b];return"driver"in a&&a.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof a?this._config[a]:this._config},b.prototype.defineDriver=function(a,b,c){var d=new Promise(function(b,c){var d,e,h,i,k,m,n;try{if(d=a._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),h=new Error("Custom driver name already in use: "+a._driver),!a._driver)return void c(e);if(f(a._driver))return void c(h);for(i=j.concat("_initStorage"),k=0;k<i.length;k++)if(m=i[k],!m||!a[m]||"function"!=typeof a[m])return void c(e);n=Promise.resolve(!0),"_support"in a&&(n=a._support&&"function"==typeof a._support?a._support():Promise.resolve(!!a._support)),n.then(function(c){l[d]=c,g[d]=a,b()},c)}catch(a){c(a)}});return d.then(b,c),d},b.prototype.driver=function(){return this._driver||null},b.prototype.getDriver=function(a,b,d){var e=this,h=function(){if(f(a))switch(a){case e.INDEXEDDB:return new Promise(function(a,b){a(c(1))});case e.LOCALSTORAGE:return new Promise(function(a,b){a(c(2))});case e.WEBSQL:return new Promise(function(a,b){a(c(4))})}else if(g[a])return Promise.resolve(g[a]);return Promise.reject(new Error("Driver not found."))}();return h.then(b,d),h},b.prototype.getSerializer=function(a){var b=new Promise(function(a,b){a(c(3))});return a&&"function"==typeof a&&b.then(function(b){a(b)}),b},b.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return c.then(a,a),c},b.prototype.setDriver=function(a,b,c){function d(){h._config.driver=h.driver()}function e(a){return function(){function b(){for(var e,f;c<a.length;)return e=a[c],c++,h._dbInfo=null,h._ready=null,h.getDriver(e).then(function(a){return h._extend(a),d(),h._ready=h._initStorage(h._config),h._ready}).catch(b);return d(),f=new Error("No available storage method found."),h._driverSet=Promise.reject(f),h._driverSet}var c=0;return b()}}var f,g,h=this;return m(a)||(a=[a]),f=this._getSupportedDrivers(a),g=null!==this._driverSet?this._driverSet.catch(function(){return Promise.resolve()}):Promise.resolve(),this._driverSet=g.then(function(){var a=f[0];return h._dbInfo=null,h._ready=null,h.getDriver(a).then(function(a){h._driver=a._driver,d(),h._wrapLibraryMethodsWithReady(),h._initDriver=e(f)})}).catch(function(){d();var a=new Error("No available storage method found.");return h._driverSet=Promise.reject(a),h._driverSet}),this._driverSet.then(b,c),this._driverSet},b.prototype.supports=function(a){return!!l[a]},b.prototype._extend=function(a){e(this,a)},b.prototype._getSupportedDrivers=function(a){var b,c,d,e=[];for(b=0,c=a.length;b<c;b++)d=a[b],this.supports(d)&&e.push(d);return e},b.prototype._wrapLibraryMethodsWithReady=function(){for(var b=0;b<j.length;b++)a(this,j[b])},b.prototype.createInstance=function(a){return new b(a)},b}(),o=new n;b.default=o}.call("undefined"!=typeof window?window:self),a.exports=b.default},function(a,b){"use strict";b.__esModule=!0,function(){function a(a,b){var c,d,e;a=a||[],b=b||{};try{return new Blob(a,b)}catch(f){if("TypeError"!==f.name)throw f;for(c=B.BlobBuilder||B.MSBlobBuilder||B.MozBlobBuilder||B.WebKitBlobBuilder,d=new c,e=0;e<a.length;e+=1)d.append(a[e]);return d.getBlob(b.type)}}function c(a){var b,c=a.length,d=new ArrayBuffer(c),e=new Uint8Array(d);for(b=0;b<c;b++)e[b]=a.charCodeAt(b);return d}function d(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a),d.withCredentials=!0,d.responseType="arraybuffer",d.onreadystatechange=function(){if(4===d.readyState)return 200===d.status?b({response:d.response,type:d.getResponseHeader("Content-Type")}):void c({status:d.status,response:d.response})},d.send()})}function e(b){return new Promise(function(c,e){var f=a([""],{type:"image/png"}),g=b.transaction([x],"readwrite");g.objectStore(x).put(f,"key"),g.oncomplete=function(){var a=b.transaction([x],"readwrite"),f=a.objectStore(x).get("key");f.onerror=e,f.onsuccess=function(a){var b=a.target.result,e=URL.createObjectURL(b);d(e).then(function(a){c(!(!a||"image/png"!==a.type))},function(){c(!1)}).then(function(){URL.revokeObjectURL(e)})}}}).catch(function(){return!1})}function f(a){return"boolean"==typeof y?Promise.resolve(y):e(a).then(function(a){return y=a})}function g(a){return new Promise(function(b,c){var d=new FileReader;d.onerror=c,d.onloadend=function(c){var d=btoa(c.target.result||"");b({__local_forage_encoded_blob:!0,data:d,type:a.type})},d.readAsBinaryString(a)})}function h(b){var d=c(atob(b.data));return a([d],{type:b.type})}function i(a){return a&&a.__local_forage_encoded_blob}function j(a){function b(){return Promise.resolve()}var c,d,e,f,g,h,i=this,j={db:null};if(a)for(c in a)j[c]=a[c];for(z||(z={}),d=z[j.name],d||(d={forages:[],db:null},z[j.name]=d),d.forages.push(this),e=[],f=0;f<d.forages.length;f++)g=d.forages[f],g!==this&&e.push(g.ready().catch(b));return h=d.forages.slice(0),Promise.all(e).then(function(){return j.db=d.db,k(j)}).then(function(a){return j.db=a,n(j,i._defaultConfig.version)?l(j):a}).then(function(a){var b,c;for(j.db=d.db=a,i._dbInfo=j,b=0;b<h.length;b++)c=h[b],c!==i&&(c._dbInfo.db=j.db,c._dbInfo.version=j.version)})}function k(a){return m(a,!1)}function l(a){return m(a,!0)}function m(a,b){return new Promise(function(c,d){var e,f;if(a.db){if(!b)return c(a.db);a.db.close()}e=[a.name],b&&e.push(a.version),f=C.open.apply(C,e),b&&(f.onupgradeneeded=function(b){var c=f.result;try{c.createObjectStore(a.storeName),b.oldVersion<=1&&c.createObjectStore(x)}catch(c){if("ConstraintError"!==c.name)throw c;B.console.warn('The database "'+a.name+'" has been upgraded from version '+b.oldVersion+" to version "+b.newVersion+', but the storage "'+a.storeName+'" already exists.')}}),f.onerror=function(){d(f.error)},f.onsuccess=function(){c(f.result)}})}function n(a,b){var c,d,e,f;return!a.db||(c=!a.db.objectStoreNames.contains(a.storeName),d=a.version<a.db.version,e=a.version>a.db.version,d&&(a.version!==b&&B.console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),!(!e&&!c)&&(c&&(f=a.db.version+1,f>a.version&&(a.version=f)),!0))}function o(a,b){var c,d=this;return"string"!=typeof a&&(B.console.warn(a+" used as a key, but it is not a string."),a=String(a)),c=new Promise(function(b,c){d.ready().then(function(){var e=d._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=f.get(a);g.onsuccess=function(){var a=g.result;void 0===a&&(a=null),i(a)&&(a=h(a)),b(a)},g.onerror=function(){c(g.error)}}).catch(c)}),w(c,b),c}function p(a,b){var c=this,d=new Promise(function(b,d){c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=f.openCursor(),j=1;g.onsuccess=function(){var c,d,e=g.result;e?(c=e.value,i(c)&&(c=h(c)),d=a(c,e.key,j++),void 0!==d?b(d):e.continue()):b()},g.onerror=function(){d(g.error)}}).catch(d)});return w(d,b),d}function q(a,b,c){var d,e=this;return"string"!=typeof a&&(B.console.warn(a+" used as a key, but it is not a string."),a=String(a)),d=new Promise(function(c,d){var h;e.ready().then(function(){return h=e._dbInfo,b instanceof Blob?f(h.db).then(function(a){return a?b:g(b)}):b}).then(function(b){var e,f=h.db.transaction(h.storeName,"readwrite"),g=f.objectStore(h.storeName);null===b&&(b=void 0),e=g.put(b,a),f.oncomplete=function(){void 0===b&&(b=null),c(b)},f.onabort=f.onerror=function(){var a=e.error?e.error:e.transaction.error;d(a)}}).catch(d)}),w(d,c),d}function r(a,b){var c,d=this;return"string"!=typeof a&&(B.console.warn(a+" used as a key, but it is not a string."),a=String(a)),c=new Promise(function(b,c){d.ready().then(function(){var e=d._dbInfo,f=e.db.transaction(e.storeName,"readwrite"),g=f.objectStore(e.storeName),h=g.delete(a);f.oncomplete=function(){b()},f.onerror=function(){c(h.error)},f.onabort=function(){var a=h.error?h.error:h.transaction.error;c(a)}}).catch(c)}),w(c,b),c}function s(a){var b=this,c=new Promise(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readwrite"),f=e.objectStore(d.storeName),g=f.clear();e.oncomplete=function(){a()},e.onabort=e.onerror=function(){var a=g.error?g.error:g.transaction.error;c(a)}}).catch(c)});return w(c,a),c}function t(a){var b=this,c=new Promise(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readonly").objectStore(d.storeName),f=e.count();f.onsuccess=function(){a(f.result)},f.onerror=function(){c(f.error)}}).catch(c)});return w(c,a),c}function u(a,b){var c=this,d=new Promise(function(b,d){return a<0?void b(null):void c.ready().then(function(){var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=!1,h=f.openCursor();h.onsuccess=function(){var c=h.result;return c?void(0===a?b(c.key):g?b(c.key):(g=!0,c.advance(a))):void b(null)},h.onerror=function(){d(h.error)}}).catch(d)});return w(d,b),d}function v(a){var b=this,c=new Promise(function(a,c){b.ready().then(function(){var d=b._dbInfo,e=d.db.transaction(d.storeName,"readonly").objectStore(d.storeName),f=e.openCursor(),g=[];f.onsuccess=function(){var b=f.result;return b?(g.push(b.key),void b.continue()):void a(g)},f.onerror=function(){c(f.error)}}).catch(c)});return w(c,a),c}function w(a,b){b&&a.then(function(a){b(null,a)},function(a){b(a)})}var x,y,z,A,B=this,C=C||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;C&&(x="local-forage-detect-blob-support",A={_driver:"asyncStorage",_initStorage:j,iterate:p,getItem:o,setItem:q,removeItem:r,clear:s,length:t,key:u,keys:v},b.default=A)}.call("undefined"!=typeof window?window:self),a.exports=b.default},function(a,b,c){"use strict";b.__esModule=!0,function(){function a(a){var b,d=this,e={};if(a)for(b in a)e[b]=a[b];return e.keyPrefix=e.name+"/",e.storeName!==d._defaultConfig.storeName&&(e.keyPrefix+=e.storeName+"/"),d._dbInfo=e,new Promise(function(a,b){a(c(3))}).then(function(a){return e.serializer=a,Promise.resolve()})}function d(a){var b=this,c=b.ready().then(function(){var a,c,d=b._dbInfo.keyPrefix;for(a=o.length-1;a>=0;a--)c=o.key(a),0===c.indexOf(d)&&o.removeItem(c)});return l(c,a),c}function e(a,b){var c,d=this;return"string"!=typeof a&&(n.console.warn(a+" used as a key, but it is not a string."),a=String(a)),c=d.ready().then(function(){var b=d._dbInfo,c=o.getItem(b.keyPrefix+a);return c&&(c=b.serializer.deserialize(c)),c}),l(c,b),c}function f(a,b){var c=this,d=c.ready().then(function(){var b,d,e,f=c._dbInfo,g=f.keyPrefix,h=g.length,i=o.length,j=1;for(b=0;b<i;b++)if(d=o.key(b),0===d.indexOf(g)&&(e=o.getItem(d),e&&(e=f.serializer.deserialize(e)),e=a(e,d.substring(h),j++),void 0!==e))return e});return l(d,b),d}function g(a,b){var c=this,d=c.ready().then(function(){var b,d=c._dbInfo;try{b=o.key(a)}catch(a){b=null}return b&&(b=b.substring(d.keyPrefix.length)),b});return l(d,b),d}function h(a){var b=this,c=b.ready().then(function(){var a,c=b._dbInfo,d=o.length,e=[];for(a=0;a<d;a++)0===o.key(a).indexOf(c.keyPrefix)&&e.push(o.key(a).substring(c.keyPrefix.length));return e});return l(c,a),c}function i(a){var b=this,c=b.keys().then(function(a){return a.length});return l(c,a),c}function j(a,b){var c,d=this;return"string"!=typeof a&&(n.console.warn(a+" used as a key, but it is not a string."),a=String(a)),c=d.ready().then(function(){var b=d._dbInfo;o.removeItem(b.keyPrefix+a)}),l(c,b),c}function k(a,b,c){var d,e=this;return"string"!=typeof a&&(n.console.warn(a+" used as a key, but it is not a string."),a=String(a)),d=e.ready().then(function(){void 0===b&&(b=null);var c=b;return new Promise(function(d,f){var g=e._dbInfo;g.serializer.serialize(b,function(b,e){if(e)f(e);else try{o.setItem(g.keyPrefix+a,b),d(c)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||f(a),f(a)}})})}),l(d,c),d}function l(a,b){b&&a.then(function(a){b(null,a)},function(a){b(a)})}var m,n=this,o=null;try{if(!(this.localStorage&&"setItem"in this.localStorage))return;o=this.localStorage}catch(a){return}m={_driver:"localStorageWrapper",_initStorage:a,iterate:f,getItem:e,setItem:k,removeItem:j,clear:d,length:i,key:g,keys:h},b.default=m}.call("undefined"!=typeof window?window:self),a.exports=b.default},function(a,b){"use strict";b.__esModule=!0,function(){function a(a,b){var c,d,e;a=a||[],b=b||{};try{return new Blob(a,b)}catch(f){if("TypeError"!==f.name)throw f;for(c=x.BlobBuilder||x.MSBlobBuilder||x.MozBlobBuilder||x.WebKitBlobBuilder,d=new c,e=0;e<a.length;e+=1)d.append(a[e]);return d.getBlob(b.type)}}function c(a,b){var c,d,e,g="";if(a&&(g=a.toString()),a&&("[object ArrayBuffer]"===a.toString()||a.buffer&&"[object ArrayBuffer]"===a.buffer.toString()))d=j,a instanceof ArrayBuffer?(c=a,d+=l):(c=a.buffer,"[object Int8Array]"===g?d+=n:"[object Uint8Array]"===g?d+=o:"[object Uint8ClampedArray]"===g?d+=p:"[object Int16Array]"===g?d+=q:"[object Uint16Array]"===g?d+=s:"[object Int32Array]"===g?d+=r:"[object Uint32Array]"===g?d+=t:"[object Float32Array]"===g?d+=u:"[object Float64Array]"===g?d+=v:b(new Error("Failed to get type for BinaryArray"))),b(d+f(c));else if("[object Blob]"===g)e=new FileReader,e.onload=function(){var c=h+a.type+"~"+f(this.result);b(j+m+c)},e.readAsArrayBuffer(a);else try{b(JSON.stringify(a))}catch(c){console.error("Couldn't convert value into a JSON string: ",a),b(null,c)}}function d(b){var c,d,f,g,h;if(b.substring(0,k)!==j)return JSON.parse(b);switch(c=b.substring(w),d=b.substring(k,w),d===m&&i.test(c)&&(g=c.match(i),f=g[1],c=c.substring(g[0].length)),h=e(c),d){case l:return h;case m:return a([h],{type:f});case n:return new Int8Array(h);case o:return new Uint8Array(h);case p:return new Uint8ClampedArray(h);case q:return new Int16Array(h);case s:return new Uint16Array(h);case r:return new Int32Array(h);case t:return new Uint32Array(h);case u:return new Float32Array(h);case v:return new Float64Array(h);default:throw new Error("Unkown type: "+d)}}function e(a){var b,c,d,e,f,h,i,j=.75*a.length,k=a.length,l=0;for("="===a[a.length-1]&&(j--,"="===a[a.length-2]&&j--),h=new ArrayBuffer(j),i=new Uint8Array(h),b=0;b<k;b+=4)c=g.indexOf(a[b]),d=g.indexOf(a[b+1]),e=g.indexOf(a[b+2]),f=g.indexOf(a[b+3]),i[l++]=c<<2|d>>4,i[l++]=(15&d)<<4|e>>2,i[l++]=(3&e)<<6|63&f;return h}function f(a){var b,c=new Uint8Array(a),d="";for(b=0;b<c.length;b+=3)d+=g[c[b]>>2],d+=g[(3&c[b])<<4|c[b+1]>>4],d+=g[(15&c[b+1])<<2|c[b+2]>>6],d+=g[63&c[b+2]];return c.length%3===2?d=d.substring(0,d.length-1)+"=":c.length%3===1&&(d=d.substring(0,d.length-2)+"=="),d}var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="~~local_forage_type~",i=/^~~local_forage_type~([^~]+)~/,j="__lfsc__:",k=j.length,l="arbf",m="blob",n="si08",o="ui08",p="uic8",q="si16",r="si32",s="ur16",t="ui32",u="fl32",v="fl64",w=k+l.length,x=this,y={serialize:c,deserialize:d,stringToBuffer:e,bufferToString:f};b.default=y}.call("undefined"!=typeof window?window:self),a.exports=b.default},function(a,b,c){"use strict";b.__esModule=!0,function(){function a(a){var b,d,e=this,f={db:null};if(a)for(b in a)f[b]="string"!=typeof a[b]?a[b].toString():a[b];return d=new Promise(function(b,c){try{f.db=o(f.name,String(f.version),f.description,f.size)}catch(d){return e.setDriver(e.LOCALSTORAGE).then(function(){return e._initStorage(a)}).then(b).catch(c)}f.db.transaction(function(a){a.executeSql("CREATE TABLE IF NOT EXISTS "+f.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){e._dbInfo=f,b()},function(a,b){c(b)})})}),new Promise(function(a,b){a(c(3))}).then(function(a){return f.serializer=a,d})}function d(a,b){var c,d=this;return"string"!=typeof a&&(n.console.warn(a+" used as a key, but it is not a string."),a=String(a)),c=new Promise(function(b,c){d.ready().then(function(){var e=d._dbInfo;e.db.transaction(function(d){d.executeSql("SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){var d=c.rows.length?c.rows.item(0).value:null;d&&(d=e.serializer.deserialize(d)),b(d)},function(a,b){c(b)})})}).catch(c)}),l(c,b),c}function e(a,b){var c=this,d=new Promise(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT * FROM "+e.storeName,[],function(c,d){var f,g,h,i=d.rows,j=i.length;for(f=0;f<j;f++)if(g=i.item(f),h=g.value,h&&(h=e.serializer.deserialize(h)),h=a(h,g.key,f+1),void 0!==h)return void b(h);b()},function(a,b){d(b)})})}).catch(d)});return l(d,b),d}function f(a,b,c){var d,e=this;return"string"!=typeof a&&(n.console.warn(a+" used as a key, but it is not a string."),a=String(a)),d=new Promise(function(c,d){e.ready().then(function(){var f,g;void 0===b&&(b=null),f=b,g=e._dbInfo,g.serializer.serialize(b,function(b,e){e?d(e):g.db.transaction(function(e){e.executeSql("INSERT OR REPLACE INTO "+g.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){c(f)},function(a,b){d(b)})},function(a){a.code===a.QUOTA_ERR&&d(a)})})}).catch(d)}),l(d,c),d}function g(a,b){var c,d=this;return"string"!=typeof a&&(n.console.warn(a+" used as a key, but it is not a string."),a=String(a)),c=new Promise(function(b,c){d.ready().then(function(){var e=d._dbInfo;e.db.transaction(function(d){d.executeSql("DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){c(b)})})}).catch(c)}),l(c,b),c}function h(a){var b=this,c=new Promise(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return l(c,a),c}function i(a){var b=this,c=new Promise(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){var d=c.rows.item(0).c;a(d)},function(a,b){c(b)})})}).catch(c)});return l(c,a),c}function j(a,b){var c=this,d=new Promise(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){var d=c.rows.length?c.rows.item(0).key:null;b(d)},function(a,b){d(b)})})}).catch(d)});return l(d,b),d}function k(a){var b=this,c=new Promise(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){b.executeSql("SELECT key FROM "+d.storeName,[],function(b,c){var d,e=[];for(d=0;d<c.rows.length;d++)e.push(c.rows.item(d).key);a(e)},function(a,b){c(b)})})}).catch(c)});return l(c,a),c}function l(a,b){b&&a.then(function(a){b(null,a)},function(a){b(a)})}var m,n=this,o=this.openDatabase;o&&(m={_driver:"webSQLStorage",_initStorage:a,iterate:e,getItem:d,setItem:f,removeItem:g,clear:h,length:i,key:j,keys:k},b.default=m)}.call("undefined"!=typeof window?window:self),a.exports=b.default}])}),j="settings",self.addEventListener("message",a,!1);